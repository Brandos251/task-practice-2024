# task-practice-2024
Этот проект был выполнен в рамках производственной практики в июле 2024 года.

## Функциональность продукта
Программа детектирует "точки-интереса" на фотографиях (RGB-изображениях). Под "точками-интереса" понимаются углы прямоугольников (или схожих с ними фигур), которые присутствуют на изображениях. Эти прямоугольники формируются гранями параллелепипедов, которые перпендикулярны (или почти перпендикулярны) оптической оси камеры.

### Как это работает
После запуска локального сервера, изображение передаётся с помощью POST-запроса и обрабатывается. В ответ пользователю возвращается JSON-строка с парами ключ-значение, где ключ — это ID обнаруженного объекта (прямоугольника), а значение — координаты в формате {A: x1-y1, B: x2-y2, C: x3-y3, D: x4-y4}. Здесь A, B, C и D — это углы прямоугольника (верхний левый, верхний правый, нижний левый и нижний правый соответственно), а пары xN-yN представляют координаты по осям x и y.

После возврата ответа пользователю, в директории проекта сохраняются следующие файлы:
- [results_coordinates](https://github.com/TwentyOn/practice-2024/blob/main/practice_pointDetector/imageProcessing_project/results_coordinates.json) — JSON-файл с найденными координатами объектов.
- result_image — изображение с визуализацией углов прямоугольника и его контуров:

![result_image](https://github.com/user-attachments/assets/8db73f12-4cc8-429b-a7a4-1a878b4e8248)

## Необходимые компоненты
- Python 3.10^
- Виртуальное окружение (Anaconda и др.)
- Docker

## Создание виртуального окружения
Создание:

```bash conda create --name ImageProcessing python=3.10```

Запуск:

```conda activate ImageProcessing```

# Установка необходимых библиотек

Установка библиотек выполняется с помощью файла requirements.txt следующей командой:

```pip install -r requirements.txt```

# Локальный запуск
Создание миграций:


```python manage.py migrate```

Запуск сервера:


```python manage.py runserver```

- После запуска сервер будет доступен по адресу: http://127.0.0.1:8000
- Документация для API представлена в виде Postman-коллекции в файле POSTMAN_request_API_DRF(https://github.com/TwentyOn/practice-2024/blob/main/practice_pointDetector/imageProcessing_project/POSTMAN_request_API_DRF.postman_collection.json)
- Для отправки POST-запроса требуется авторизация по адресу: http://127.0.0.1:8000/api/token/
  - логин: admin
  - пароль: admin

После авторизации вы получите два токена: access и refresh. Используйте токен refresh для получения нового access токена, если срок действия последнего истек, по адресу: http://127.0.0.1:8000/api/token/refresh/.

Токен авторизации передаётся в заголовке Headers с ключом Authorization. Подробности можно найти в файле-документации Postman.

Для доступа к документации swagger перейдите по адресу: http://127.0.0.1:8000/api/token/schema/swagger-ui

# Запуск API с помощью Docker

Сборка Docker-образа и запуск контейнера:

```docker-compose build```

```docker-compose up```

Выполнение маграций:

``` python manage.py migrate ```

Сбор статики:

```python manage.py collectstatic --noinput```

Запуск сервера:

```python manage.py runserver```

После запуска взаимодействие с API происходит по тем же URL-адресам, что и при локальном запуске.